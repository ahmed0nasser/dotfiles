function fish_prompt
    # Show current working directory
    set_color purple
    echo -n (prompt_pwd)

    # Check if we're inside a git repo safely
    if git rev-parse --is-inside-work-tree >/dev/null 2>&1
        set branch (git rev-parse --abbrev-ref HEAD 2>/dev/null)
        set dirty (git status --porcelain 2>/dev/null)

        set_color yellow
        echo -n "  $branch"

        if test -n "$dirty"
            set_color red
            echo -n " *"
        end
    end

    set_color red
    echo -n " ❯ "
end

